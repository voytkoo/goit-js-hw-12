{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// function HTTP request\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '44067524-7b37ef940db212c179aad5861';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: perPage,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw new Error('Failed to fetch images');\n    }\n}","// functions for displaying interface elements\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.btn')\n\nlet galleries = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250\n    });\n\nexport function renderImage(images) {\n  const markUp = images.map(image =>\n    `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n<ul class='info'>\n      <li class=\"info-image><strong class=\"info-comment\">Likes</strong> ${image.likes}</li>\n      <li class=\"info-image><strong class=\"info-comment\">Views</strong> ${image.views}</li>\n      <li class=\"info-image><strong class=\"info-comment\">Comments</strong> ${image.comments}</li>\n      <li class=\"info-image><strong class=\"info-comment\">Downloads</strong> ${image.downloads}</li>\n      </ul>\n</li>`\n  ).join(\"\");\n  gallery.insertAdjacentHTML('beforeend', markUp);\n}\n\n\nexport function showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n    });\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoad() {\n  loader.style.display = 'block';\n  \n    // loader.classList.remove('hidden');\n}\n \nexport function hideLoad() {\n  loader.style.display = 'none';\n  \n    // loader.classList.add('hidden');\n}\nexport function showBtnLoad() {\nbtnLoad.style.display = 'block';\n}\n\nexport function hideBtnLoad() {\nbtnLoad.style.display = 'none';\n}\n\n\nexport function refreshGalleries() {\n    galleries.refresh();\n\n}","import { fetchImages } from \"./js/pixabay-api\";\nimport { renderImage, showError, clearGallery, showLoad, hideLoad, refreshGalleries, showBtnLoad, hideBtnLoad } from \"./js/render-functions\";\n// import { moduleLightbox } from \"./js/render-functions\";\n\n\nconst form = document.querySelector('.form-search');\nconst formInput = document.querySelector('.form-search input[name=\"query\"]');\nconst btnLoad = document.querySelector('.btn');\n// let galleries = null;\n\nlet query = '';\nlet page = 1;\n\nform.addEventListener('submit', handleSubmit);\nbtnLoad.addEventListener('click', loadMore);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n\n  query = formInput.value.trim();\n\n  if (!query) {\n    showError('Please enter a search term');\n    return;\n  }\n  \n  clearGallery();\n  hideBtnLoad();\n  showLoad();\n  page = 1;\n  try {\n  const data = await fetchImages(query, page);\n  if (data.hits.length === 0) {\n    showError('Sorry, there are no images matching your search query. Please try again!');\n  } else {\n    renderImage(data.hits);\n    showBtnLoad();\n    refreshGalleries();\n  }\n    \n} catch (error) {\n      showError('An error occured while fetching images');\n      console.error(error);\n    } finally {\n          hideLoad();\n      }\n}\n    async function loadMore() {\n    page += 1;\n    showLoad();\n    try {\n        const data = await fetchImages(query, page);\n        renderImage(data.hits);\n        if (page * 15 >= data.totalHits) {\n            hideBtnLoad();\n            showError(\"We're sorry, but you've reached the end of search results.\");\n      }\n      \n      refreshGalleries()\n      \n    } catch (error) {\n        showError('An error occurred while fetching images');\n        console.error(error);\n    } finally {\n        hideLoad();\n    }\n}"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","axios","error","gallery","loader","btnLoad","galleries","SimpleLightbox","renderImage","images","markUp","image","showError","message","iziToast","clearGallery","showLoad","hideLoad","showBtnLoad","hideBtnLoad","refreshGalleries","form","formInput","handleSubmit","loadMore","event","data"],"mappings":"owBAGA,MAAMA,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC7D,GAAI,CAYA,OAXiB,MAAMC,EAAM,IAAIN,EAAU,CACvC,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACb,CACb,CAAS,GACe,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvC,IAAI,MAAM,wBAAwB,CAC3C,CACL,CCdA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,MAAM,EAE7C,IAAIC,EAAY,IAAIC,EAAe,aAAc,CACzC,aAAc,MACd,aAAc,GACtB,CAAK,EAEE,SAASC,EAAYC,EAAQ,CAClC,MAAMC,EAASD,EAAO,IAAIE,GACxB;AAAA,kCAC8BA,EAAM,aAAa;AAAA;AAAA;AAAA,aAGxCA,EAAM,YAAY;AAAA,aAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,0EAImDA,EAAM,KAAK;AAAA,0EACXA,EAAM,KAAK;AAAA,6EACRA,EAAM,QAAQ;AAAA,8EACbA,EAAM,SAAS;AAAA;AAAA,MAG7F,EAAI,KAAK,EAAE,EACTR,EAAQ,mBAAmB,YAAaO,CAAM,CAChD,CAGO,SAASE,EAAUC,EAAS,CAC/BC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,CACjB,CAAK,CACL,CAEO,SAASE,GAAe,CAC7BZ,EAAQ,UAAY,EACtB,CAEO,SAASa,GAAW,CACzBZ,EAAO,MAAM,QAAU,OAGzB,CAEO,SAASa,GAAW,CACzBb,EAAO,MAAM,QAAU,MAGzB,CACO,SAASc,GAAc,CAC9Bb,EAAQ,MAAM,QAAU,OACxB,CAEO,SAASc,GAAc,CAC9Bd,EAAQ,MAAM,QAAU,MACxB,CAGO,SAASe,GAAmB,CAC/Bd,EAAU,QAAO,CAErB,CCtEA,MAAMe,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAY,SAAS,cAAc,kCAAkC,EACrEjB,EAAU,SAAS,cAAc,MAAM,EAG7C,IAAIP,EAAQ,GACRC,EAAO,EAEXsB,EAAK,iBAAiB,SAAUE,CAAY,EAC5ClB,EAAQ,iBAAiB,QAASmB,CAAQ,EAE1C,eAAeD,EAAaE,EAAO,CAKjC,GAJAA,EAAM,eAAc,EAEpB3B,EAAQwB,EAAU,MAAM,OAEpB,CAACxB,EAAO,CACVc,EAAU,4BAA4B,EACtC,MACD,CAEDG,IACAI,IACAH,IACAjB,EAAO,EACP,GAAI,CACJ,MAAM2B,EAAO,MAAM7B,EAAYC,EAAOC,CAAI,EACtC2B,EAAK,KAAK,SAAW,EACvBd,EAAU,0EAA0E,GAEpFJ,EAAYkB,EAAK,IAAI,EACrBR,IACAE,IAGJ,OAASlB,EAAO,CACVU,EAAU,wCAAwC,EAClD,QAAQ,MAAMV,CAAK,CACzB,QAAc,CACJe,GACH,CACP,CACI,eAAeO,GAAW,CAC1BzB,GAAQ,EACRiB,IACA,GAAI,CACA,MAAMU,EAAO,MAAM7B,EAAYC,EAAOC,CAAI,EAC1CS,EAAYkB,EAAK,IAAI,EACjB3B,EAAO,IAAM2B,EAAK,YAClBP,IACAP,EAAU,4DAA4D,GAG5EQ,EAAkB,CAEnB,OAAQlB,EAAO,CACZU,EAAU,yCAAyC,EACnD,QAAQ,MAAMV,CAAK,CAC3B,QAAc,CACNe,GACH,CACL"}