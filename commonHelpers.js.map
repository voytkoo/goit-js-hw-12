{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// function HTTP request\nimport axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '44067524-7b37ef940db212c179aad5861';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: perPage,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw new Error('Failed to fetch images');\n    }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.btn');\n\nlet galleries = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function renderImage(images) {\n    const markup = images.map(image =>\n        `<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n            <ul class='info'>\n                <li class=\"info-image\"><strong class=\"info-comment\">Likes</strong> ${image.likes}</li>\n                <li class=\"info-image\"><strong class=\"info-comment\">Views</strong> ${image.views}</li>\n                <li class=\"info-image\"><strong class=\"info-comment\">Comments</strong> ${image.comments}</li>\n                <li class=\"info-image\"><strong class=\"info-comment\">Downloads</strong> ${image.downloads}</li>\n            </ul>\n        </li>`\n    ).join(\"\");\n    gallery.insertAdjacentHTML('beforeend', markup); // додавання нових зображень\n}\n\nexport function showError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n    });\n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function showLoad() {\n    loader.style.display = 'block';\n}\n\nexport function hideLoad() {\n    loader.style.display = 'none';\n}\n\nexport function showBtnLoad() {\n    btnLoad.style.display = 'block';\n}\n\nexport function hideBtnLoad() {\n    btnLoad.style.display = 'none';\n}\n\nexport function refreshGalleries() {\n    galleries.refresh();\n}\n\nexport function smoothScroll() {\n    const galleryItems = document.querySelectorAll('.gallery-item');\n    if (galleryItems.length > 0) {\n        const cardHeight = galleryItems[0].getBoundingClientRect().height;\n        window.scrollBy(0, -window.innerHeight);\n\n    }\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderImage, showError, clearGallery, showLoad, hideLoad, refreshGalleries, showBtnLoad, hideBtnLoad, smoothScroll } from './js/render-functions';\n\nconst form = document.querySelector('.form-search');\nconst formInput = document.querySelector('.form-search input[name=\"query\"]');\nconst btnLoad = document.querySelector('.btn');\n\nlet query = '';\nlet page = 1;\n\n\nform.addEventListener('submit', handleSubmit);\nbtnLoad.addEventListener('click', loadMore);\n\nasync function handleSubmit(event) {\n    event.preventDefault();\n    query = formInput.value.trim();\n    if (!query) {\n        showError('Please enter a search term');\n        return;\n    }\n    clearGallery();\n    hideBtnLoad();\n    showLoad();\n    page = 1;\n    try {\n        const data = await fetchImages(query, page);\n        if (data.hits.length === 0) {\n            showError('Sorry, there are no images matching your search query. Please try again!');\n        } else {\n            renderImage(data.hits);\n            showBtnLoad();\n            refreshGalleries();\n        }\n    } catch (error) {\n        showError('An error occurred while fetching images');\n        console.error(error);\n    } finally {\n        hideLoad();\n    }\n}\n\nasync function loadMore() {\n    page += 1;\n    showLoad();\n    try {\n        const data = await fetchImages(query, page);\n        renderImage(data.hits);\n        if (page * 15 >= data.totalHits) {\n            hideBtnLoad();\n            showError(\"We're sorry, but you've reached the end of search results.\");\n        } else {\n            showBtnLoad();\n        }\n        refreshGalleries();\n        smoothScroll();\n    } catch (error) {\n        showError('An error occurred while fetching images');\n        console.error(error);\n    } finally {\n        hideLoad();\n    }\n}\n\n\n\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","axios","error","gallery","loader","btnLoad","galleries","SimpleLightbox","renderImage","images","markup","image","showError","message","iziToast","clearGallery","showLoad","hideLoad","showBtnLoad","hideBtnLoad","refreshGalleries","smoothScroll","galleryItems","form","formInput","handleSubmit","loadMore","event","data"],"mappings":"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"}